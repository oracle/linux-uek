// SPDX-License-Identifier: GPL-2.0

#include <dt-bindings/reset/amd,pensando-elba-reset.h>

&ahb_clk {
	clock-frequency = <400000000>;
};

&emmc_clk {
	clock-frequency = <200000000>;
};

&flash_clk {
	clock-frequency = <400000000>;
};

&ref_clk {
	clock-frequency = <156250000>;
};

&qspi {
	status = "okay";
	flash0: flash@0 {
		compatible = "jedec,spi-nor";
		reg = <0>;
		spi-max-frequency = <40000000>;
		spi-rx-bus-width = <2>;
		m25p,fast-read;
		cdns,read-delay = <0>;
		cdns,tshsl-ns = <0>;
		cdns,tsd2d-ns = <0>;
		cdns,tchsh-ns = <0>;
		cdns,tslch-ns = <0>;
	};
};

&gpio0 {
	status = "ok";
};

&gpio1 {
	status = "ok";
};

&emmc {
	bus-width = <8>;
	cap-mmc-hw-reset;
	reset-names = "hw";
	resets = <&rstc EMMC_HW_RESET>;
	status = "ok";
};

&edac {
	status = "okay";
};

&wdt0 {
	status = "okay";
};

&i2c0 {
	clock-frequency = <100000>;
	status = "okay";
};

&i2c1 {
	clock-frequency = <100000>;
	status = "okay";
};

&i2c2 {
	clock-frequency = <100000>;
	status = "okay";

	temp-sensor@4c {
		compatible = "ti,tmp451";
		reg = <0x4c>;
	};

	rtc@51 {
		compatible = "nxp,pcf85263";
		reg = <0x51>;
	};

	regulator@62 {
		compatible = "ti,tps53688";
		reg = <0x62>;
	};
};

&i2c3 {
	clock-frequency = <100000>;
	status = "okay";

	/* MCTP slave default 0x64 is 0x32 7-bit address */
	mctp@32 {
		compatible = "snps,mctp";
		reg = <0x40000032>;
	};
};

&spi0 {
	num-cs = <2>;
	status = "okay";
	spi@0 {
		compatible = "amd,pensando-elbasr", "simple-mfd";
		reg = <0>;
		#address-cells = <1>;
		#size-cells = <0>;
		spi-max-frequency = <12000000>;

		rstc: reset-controller@0 {
			compatible = "amd,pensando-elbasr-reset";
			reg = <0>;
			#reset-cells = <1>;
		};
	};

	spi@1 {
		compatible = "amd,pensando-elbasr", "simple-mfd";
		reg = <1>;
		spi-max-frequency = <12000000>;
	};
};

&spi1 {
	status = "okay";

	flash1: flash1@0 {
		compatible = "jedec,spi-nor";
		reg = <0>;
		spi-max-frequency = <20000000>;
		spi-rx-bus-width = <1>;
		m25p,fast-read;
		cdns,read-delay = <0>;
		cdns,tshsl-ns = <0>;
		cdns,tsd2d-ns = <0>;
		cdns,tchsh-ns = <0>;
		cdns,tslch-ns = <0>;
	};
};
